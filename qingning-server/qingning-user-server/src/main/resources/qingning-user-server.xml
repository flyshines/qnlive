<?xml version="1.0" encoding="UTF-8"?>
<servers>
	<server name="UserServer">
		<default class="qingning.user.server.imp.UserServerImpl">
			<function name="userFollowRoom">
				<auth>
					<access_token require="Y" />
					<timesLimit millisecond="100" />
					<appName require="Y" />
				</auth>
				<inputs>
					<param name="room_id" type="string" require="Y,000100"  />
					<param name="follow_type" type="string" require="Y,000100"  />
				</inputs>
				<outputs>
				</outputs>
			</function>

			<function name="userCourses">
				<auth>
					<access_token require="Y" />
					<appName require="Y" />
				</auth>
				<inputs>
					<param name="page_count" type="long" require="N"/>
					<param name="course_id" type="string" require="N"/>
					<param name="status" type="string" require="N"/>
					<param name="classify_id" type="string" require="N"/>
					<param name="data_source" type="string" require="N"/>
					<param name="query_time" type="long" require="N"/>
					<param name="position" type="long" require="N"/>
				</inputs>
				<outputs>
                    <param name="course_amount" type="long"/>
					<param name="course_list_size" type="long"/>
					<param name="course_list" type="list">
						<param name="course_id" type="string"/>
						<param name="status" type="string"/>
						<param name="course_url" type="string"/>
						<param name="classify_id" type="string"/>
						<param name="course_title" type="rstring"/>
						<param name="room_id" type="string"/>
						<param name="start_time" type="long"/>
						<param name="student_num" type="string"/>
						<param name="lecturer_nick_name" type="rstring"/>
						<param name="lecturer_id" type="string"/>
						<param name="course_type" type="string"/>
						<param name="position" type="long"/>
						<param name="student" type="string"/>
					</param>
				</outputs>
			</function>

			<function name="roomInfo">
				<auth>
					<access_token require="Y" />
					<appName require="Y" />
				</auth>
				<inputs>
					<param name="room_id" type="string" require="Y,000100"  />
				</inputs>
				<outputs>
					<param name="rq_code" type="string" />
					<param name="avatar_address" type="string" />
					<param name="room_name" type="rstring" />
					<param name="room_remark" type="rstring" />					
					<param name="fans_num" type="long" />
					<param name="follow_status" type="string" />
					<param name="roles" type="list" />
					<param name="qr_code" type="map">
						<param name="qr_code_url" type="string"/>
						<param name="qr_code_title" type="string"/>
						<param name="qr_code_message" type="string"/>
						<param name="qr_code_title" type="string"/>
						<param name="qr_code_ad" type="string"/>
					</param>
				</outputs>
			</function>

			<function name="courseDetailInfo">
				<auth>
					<access_token require="Y" />
					<appName require="Y" />
				</auth>
				<inputs>
					<param name="course_id" type="string" require="Y,000100"  />
				</inputs>
				<outputs>
					<param name="course_type" type="string"/>
					<param name="status" type="string"/>
					<param name="course_url" type="string"/>
					<param name="course_title" type="rstring"/>
					<param name="course_price" type="double"/>
					<param name="start_time" type="long"/>
					<param name="student_num" type="long"/>
					<param name="student_list" type="list"/>					
					<param name="avatar_address" type="string"/>
					<param name="room_name" type="rstring"/>
					<param name="room_remark" type="rstring"/>
					<param name="course_remark" type="rstring"/>
					<param name="room_id" type="string"/>
					<param name="roles" type="list"/>
					<param name="join_status" type="string"/>
					<param name="join_status" type="string"/>
					<param name="follow_status" type="string"/>
					<param name="series_join_status" type="string"/>
					<param name="course_updown" type="string"/>
					<param name="series_course_updown" type="string"/>
					<param name="series_title" type="rstring"/>
					<param name="series_updown" type="string"/>
					<param name="series_id" type="string"/>
					<param name="course_password" type="string"/>
					<param name="share_url" type="string"/>
					<param name="update_time" type="long"/>
					<param name="im_course_id" type="string"/>
					<param name="qr_code" type="map">
						<param name="qr_code_url" type="string"/>
						<param name="qr_code_title" type="string"/>
						<param name="qr_code_message" type="string"/>
						<param name="qr_code_title" type="string"/>
						<param name="qr_code_ad" type="string"/>
					</param>

				</outputs>
			</function>

			<function name="roomCourses">
				<auth>
					<access_token require="Y" />
					<appName require="Y" />
				</auth>
				<inputs>
					<param name="page_count" type="int" require="N"  />
					<param name="room_id" type="string" require="N"  />
					<param name="course_id" type="string" require="N"/>
				</inputs>
				<outputs>
					<param name="course_list" type="list">
						<param name="course_id" type="string"/>
						<param name="status" type="string"/>
						<param name="course_url" type="string"/>
						<param name="course_title" type="rstring"/>
						<param name="start_time" type="long"/>
						<param name="course_type" type="string"/>
						<param name="course_amount" type="double"/>
						<param name="student_num" type="long"/>
						<param name="student" type="string"/>
						<param name="series_course_updown" type="string"/>
						<param name="course_updown" type="string"/>
						<param name="total_amount" type="double" default="0" convert="(course_amount,extra_amount,course_type)=>{
						    var ret = 0;						
							if(utils.isEqual(course_type,'0') || utils.isEqual(course_type,'1')){
								ret=utils.convertObjectToLong(extra_amount);
							} else if(utils.isEqual(course_type,'2')){
								ret=utils.convertObjectToLong(course_amount)+utils.convertObjectToLong(extra_amount);								
							}												
							return ret;
						}"/>
					</param>
					<param name="course_sum" type="int"/>
				</outputs>
			</function>

			<function name="joinCourse">
				<auth>
					<access_token require="Y" />
					<appName require="Y" />
					<timesLimit millisecond="50" />
				</auth>
				<inputs>
					<param name="course_id" type="string" require="Y,000100"  />
					<param name="query_type" type="string" require="Y,000100" default="0"  />
				</inputs>
				<outputs>
				</outputs>
			</function>

			<function name="joinSeries">
				<auth>
					<access_token require="Y" />
					<appName require="Y" />
					<timesLimit millisecond="50" />
				</auth>
				<inputs>
					<param name="series_id" type="string" require="Y,000100"  />
					<param name="query_type" type="string" require="Y,000100" default="0"  />
				</inputs>
				<outputs>
				</outputs>
			</function>
			<function name="courseInfo">
				<auth>
					<accessToken require="Y" />
					<appName require="Y" />
				</auth>
				<inputs>
					<param name="course_id" type="string" require="Y,000100"  />
					<param name="reward_update_time" type="long" require="N"  />
				</inputs>
				<outputs>
					<param name="ppt_list" type="list">
						<param name="image_id" type="string"/>
						<param name="image_url" type="string"/>
						<param name="image_pos" type="long"/>
					</param>

					<param name="audio_list" type="list">
						<param name="audio_id" type="string"/>
						<param name="audio_url" type="string"/>
						<param name="audio_pos" type="long"/>
						<param name="audio_time" type="long"/>
						<param name="create_time" type="long"/>
						<param name="audio_image" type="string"/>
					</param>

					<param name="reward_info" type="map">
						<param name="reward_update_time" type="long"/>
						<param name="reward_list" type="list">
							<param name="reward_id" type="string"/>
							<param name="amount" type="double"/>
							<param name="reward_pos" type="long"/>
						</param>
					</param>

					<param name="im_course_id" type="string"/>
					<param name="ban_status" type="string"/>
					<param name="student_num" type="long"/>
					<param name="start_time" type="long"/>
					<param name="status" type="string"/>
					<param name="course_type" type="string"/>
					<param name="course_password" type="string"/>
					<param name="share_url" type="string"/>
					<param name="course_update_time" type="long"/>
					<param name="course_title" type="rstring"/>
					<param name="lecturer_nick_name" type="rstring"/>
					<param name="lecturer_avatar_address" type="string"/>
					<param name="course_url" type="string"/>
				</outputs>
			</function>


			<function name="messageList">
				<auth>
					<accessToken require="Y" />
				</auth>
				<inputs>
					<param name="course_id" type="string" require="Y,000100"  />
				</inputs>
				<outputs>
				</outputs>
			</function>

			<function name="courseStudents">
				<auth>
					<accessToken require="Y" />
					<appName require="Y" />
				</auth>
				<inputs>
					<param name="course_id" type="string" require="Y,000100"  />
					<param name="page_count" type="long"/>
					<param name="student_pos" type="long"/>
				</inputs>
				<outputs>
					<param name="student_num" type="string"/>
					<param name="student_list" type="list">
						<param name="avatar_address" type="string"/>
						<param name="nick_name" type="rstring"/>
						<param name="student_pos" type="string"/>
						<param name="create_time" type="long"/>
						<param name="student_pos" type="long"/>
					</param>
				</outputs>
			</function>

			<function name="getUserConsumeRecords">
				<auth>
					<accessToken require="Y" />
					<appName require="Y" />
				</auth>
				<inputs>
					<param name="shop_id" type="string" require="N"  />
					<param name="page_count" type="long" require="N"  />
					<param name="position" type="long" require="N"  />
				</inputs>
				<outputs>
					<param name="record_list" type="list">
						<param name="profit_type" type="string" />
						<param name="course_id" type="string" />
						<param name="profit_amount" type="double" />
						<param name="create_time" type="long" />
						<param name="position" type="long" />
						<param name="course_title" type="string" convert="(course_title,profit_type)=>{
							if(utils.isEqual(profit_type,'1')){
								return '';
							}
							return utils.RecoveryEmoji(course_title);
						}"/>
						<param name="lecturer_name" type="string" convert="(lecturer_name,profit_type)=>{
							if(utils.isEqual(profit_type,'0')){
								return '';
							}
							return utils.RecoveryEmoji(lecturer_name);
						}"/>
					</param>
				</outputs>
			</function>
			<function name="getUserIncomeRecords">
				<auth>
					<accessToken require="Y" />
					<appName require="Y" />
				</auth>
				<inputs>
					<param name="page_count" type="long" require="N"  />
					<param name="position" type="long" require="N"  />
					<param name="type" type="string" require="N"  />
				</inputs>
				<outputs>
					<param name="record_list" type="list">
						<param name="profit_type" type="string" />
						<param name="course_id" type="string" />
						<param name="profit_amount" type="double" />
						<param name="create_time" type="long" />
						<param name="position" type="long" />
						<param name="title" type="string" />
						<param name="is_share" type="string" />
					</param>
				</outputs>
			</function>

			<function name="noticeRooms">
				<auth>
					<accessToken require="Y" />
					<appName require="Y" />
				</auth>
				<inputs>
					<param name="page_count" type="int"/>
					<param name="notice_create_time" type="date"/>
				</inputs>
				<outputs>
					<param name="live_room_list" type="list">
						<param name="avatar_address" type="string"/>
						<param name="room_name" type="rstring"/>
						<param name="status" type="string"/>
						<param name="course_title" type="rstring"/>
						<param name="course_id" type="string"/>
						<param name="course_type" type="string"/>
						<param name="start_time" type="long"/>
						<param name="room_id" type="string"/>
						<param name="notice_create_time" type="long" fieldname="create_time"/>
					</param>
				</outputs>
			</function>

			<function name="studyCourses">
				<auth>
					<accessToken require="Y" />
					<timesLimit millisecond="10" />
					<appName require="Y" />
				</auth>
				<inputs>
					<param name="page_count" type="int"/>
					<param name="record_time" type="date"/>
				</inputs>
				<outputs>
					<param name="course_num" type="long"/>
					<param name="course_list" type="list">					
						<param name="course_id" type="string"/>
						<param name="course_title" type="rstring"/>
						<param name="course_type" type="string"/>
						<param name="course_url" type="string"/>
						<param name="lecturer_id" type="string"/>
						<param name="student_num" type="string"/>
						<param name="nick_name" type="rstring"/>
						<param name="start_time" type="long"/>
						<param name="status" type="string"/>
						<param name="room_id" type="string"/>
						<param name="record_time" type="long" fieldname="create_time"/>						
					</param>
				</outputs>
			</function>
			<function name="getCourseOrLiveRoom">
				<auth>
					<accessToken require="Y" />
					<appName require="Y" />
				</auth>
				<inputs>
					<param name="id" type="string" require="Y,000100"/>
					<param name="type" type="int" require="Y,000100"/>
				</inputs>
				<outputs>
				</outputs>
			</function>
		
			<!-- 判断新增所有用户的gains表 -->
			<function name="insertAllUserGains">
				<auth>
					<access_token require="N" />
					<appName require="N" />
				</auth>
				<inputs>
				</inputs>
				<outputs>
				</outputs>
			</function>

			<function name="userGains">
				<auth>
					<accessToken require="Y" />
					<appName require="Y" />
				</auth>
				<inputs>
				</inputs>
				<outputs>
					<param name="user_id" type="string"/>
					<param name="live_room_total_amount" type="double"/>
					<param name="live_room_real_incomes" type="double"/>
					<param name="distributer_total_amount" type="double"/>
					<param name="distributer_real_incomes" type="double"/>
					<param name="user_total_amount" type="double"/>
					<param name="user_total_real_incomes" type="double"/>
					<param name="balance" type="double"/>
					<param name="phone" type="string"/>
				</outputs>
			</function>
			
			<!-- 发起提现申请 -->
			<function name="createWithdraw">
				<auth>
					<accessToken require="Y" />
					<timesLimit millisecond="2000" />
					<appName require="Y" />
				</auth>
				<inputs>
					<param name="user_name" type="string" require="true, 000100"/>
					<param name="initial_amount" type="string" require="true, 000100"/>
					<param name="alipay_account_number" type="string" require="true, 000100"/>
					<param name="verification_code" type="string" require="true, 000100"/>
				</inputs>
				<outputs>
				</outputs>
			</function>
			
			<!-- 获取提现记录 客户度-->
			<function name="getWithdrawList">
				<auth>
					<accessToken require="Y" />
					<appName require="Y" />
				</auth>
				<inputs>
					<param name="page_count" type="long" />
					<param name="create_time" type="long" />
				</inputs>
				<outputs>
					<param name="withdraw_info_list" type="list">
						<param name="actual_amount" type="double" />
						<param name="create_time" type="long" />
						<param name="status" type="long" />
						<param name="remark" type="string" />
					</param>
				</outputs>
			</function>
			<!-- 获取提现记录 后台-->
			<function name="getWithdrawListAll">
				<auth>
					<accessToken require="N" />
					<appName require="Y, 000100" />
					<version require="N" />
				</auth>
				<inputs>
					<param name="page_count" type="string" require="N" />
					<param name="page_num" type="string" require="N" />
					<param name="user_name" type="string" require="N" />
					<param name="user_id" type="string" require="N" />
					<param name="status" type="string" require="N" />
				</inputs>
				<outputs>
					<param name="user_list" type="list">
						<param name="withdraw_cash_id" type="string" />
						<param name="user_id" type="string" />
						<param name="user_name" type="string" />
						<param name="nick_name" type="string" />
						<param name="alipay_account_number" type="string" />
						<param name="actual_amount" type="double" fieldname="initial_amount" />
						<param name="create_time" type="long" />
						<param name="status" type="string" />
						<param name="remark" type="string" />
						<param name="handle_name" type="string" />
					</param>
					<param name="total_count" type="long" />
				</outputs>
			</function>

			<!-- 处理提现 -->
			<function name="handleWithDrawResult">
				<auth>
					<accessToken require="Y" />
					<appName require="Y, 000100" />
					<version require="N" />
				</auth>
				<inputs>
					<param name="withdraw_cash_id" type="string" require="true, 000100"/>
					<param name="result" type="string" format="0|1,000004" require="Y,000100"/>
					<param name="remark" type="string" />
				</inputs>
				<outputs>
				</outputs>
			</function>
			<function name="userSeries">
				<auth>
					<accessToken require="Y" />
					<appName require="Y" />
				</auth>
				<inputs>
					<param name="page_count" type="string" />
					<param name="series_id" type="string"/>
				</inputs>
				<outputs>
					<param name="series_list" type="list">
						<param name="series_id" type="string"/>
						<param name="lecturer_id" type="string"/>
						<param name="series_title" type="rstring"/>
						<param name="series_img" type="string"/>
						<param name="course_num" type="long"/>
						<param name="series_student_num" type="long"/>
						<param name="series_price" type="double"/>
						<param name="series_amount" type="double"/>
						<param name="lecturer_nick_name" type="rstring"/>
						<param name="series_status" type="string"/>
						<param name="update_plan" type="long"/>
						<param name="series_course_type" type="string"/>
						<param name="updown" type="string"/>
					</param>
				</outputs>
			</function>
			<function name="getRoomSeries">
				<auth>
					<accessToken require="Y" />
					<appName require="Y" />
				</auth>
				<inputs>
					<param name="page_count" type="string" />
					<param name="room_id" type="string"  require="Y,000100"  />
					<param name="series_id" type="string"/>
				</inputs>
				<outputs>
					<param name="series_list" type="list">
						<param name="series_id" type="string"/>
						<param name="lecturer_id" type="string"/>
						<param name="series_title" type="rstring"/>
						<param name="series_img" type="string"/>
						<param name="course_num" type="long"/>
						<param name="series_student_num" type="long"/>
						<param name="series_price" type="double"/>
						<param name="series_amount" type="double"/>
						<param name="lecturer_nick_name" type="rstring"/>
						<param name="series_status" type="string"/>
						<param name="update_plan" type="long"/>
						<param name="series_course_type" type="string"/>
						<param name="updown" type="string"/>
					</param>
				</outputs>
			</function>
			<function name="getSeriesDetailInfo">
				<auth>
					<access_token require="Y" />
					<appName require="Y" />
				</auth>
				<inputs>
					<param name="series_id" type="string" require="Y,000100"  />
				</inputs>
				<outputs>
					<param name="series_type" type="string"/>
					<param name="series_status" type="string"/>
					<param name="series_img" type="string"/>
					<param name="series_course_type" type="string"/>
					<param name="updown" type="string"/>
					<param name="update_plan" type="string"/>
					<param name="series_title" type="rstring"/>
					<param name="series_price" type="double"/>
					<param name="update_course_time" type="long"/>
					<param name="series_student_num" type="long"/>
					<param name="course_num" type="long"/>
					<param name="avatar_address" type="string"/>
					<param name="room_name" type="rstring"/>
					<param name="room_remark" type="rstring"/>
					<param name="series_pay_remark" type="rstring"/>
					<param name="series_remark" type="rstring"/>
					<param name="series_amount" type="long"/>
					<param name="room_id" type="string"/>
					<param name="roles" type="list"/>
					<param name="series_join_status" type="string"/>
					<param name="follow_status" type="string"/>
					<param name="qr_code" type="map">
						<param name="qr_code_url" type="string"/>
						<param name="qr_code_title" type="string"/>
						<param name="qr_code_message" type="string"/>
						<param name="qr_code_title" type="string"/>
						<param name="qr_code_ad" type="string"/>
					</param>
				</outputs>
				</function>
			<function name="getSerieCourse">
				<auth>
					<access_token require="Y" />
					<appName require="Y" />
				</auth>
				<inputs>
					<param name="series_id" type="string" require="Y,000100"  />
					<param name="course_id" type="string" />
					<param name="page_count" type="string" />
				</inputs>
				<outputs>
					<param name="course_list" type="list">
						<param name="course_id" type="string"/>
						<param name="status" type="string"/>
						<param name="course_url" type="string"/>
						<param name="course_title" type="rstring"/>
						<param name="room_id" type="string"/>
						<param name="start_time" type="long"/>
						<param name="student_num" type="string"/>
						<param name="lecturer_nick_name" type="rstring"/>
						<param name="lecturer_id" type="string"/>
						<param name="student" type="string"/>
						<param name="series_id" type="string"/>
						<param name="series_course_updown" type="string"/>
						<param name="course_updown" type="string"/>
					</param>
				</outputs>
			</function>

			<function name="studySeries">
				<auth>
					<access_token require="Y" />
					<appName require="Y" />
				</auth>
				<inputs>
					<param name="series_id" type="string" />
					<param name="page_count" type="string" />
				</inputs>
				<outputs>
					<param name="series_list" type="list">
						<param name="series_id" type="string"/>
						<param name="lecturer_id" type="string"/>
						<param name="series_title" type="rstring"/>
						<param name="series_img" type="string"/>
						<param name="course_num" type="long"/>
						<param name="series_student_num" type="long"/>
						<param name="series_price" type="double"/>
						<param name="series_amount" type="double"/>
						<param name="lecturer_nick_name" type="rstring"/>
						<param name="series_status" type="string"/>
						<param name="update_plan" type="long"/>
						<param name="series_course_type" type="string"/>
						<param name="updown" type="string"/>
					</param>
				</outputs>
			</function>
			</default>
		</server>


		<version num="1.0.0" class="">
		</version>
	</servers>

